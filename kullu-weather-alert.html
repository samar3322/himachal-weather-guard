<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>District Kullu Weather Forecast</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1a6c2a, #1f8eb2, #1a2a6c);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      text-align: center;
      padding: 2rem;
    }
    h1 {
      font-size: 2.5rem;
    }
    select, button {
      padding: 0.8rem;
      font-size: 1rem;
      margin: 1rem;
      border-radius: 10px;
      border: none;
    }
    #weatherDisplay {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <header>
    <h1><i class="fas fa-mountain"></i> District Kullu Weather Forecast</h1>
    <p>Powered by Open-Meteo | Forecast for selected locations</p>
  </header>

  <div>
    <label for="location">Select Location:</label>
    <select id="location">
      <option value="31.9566,77.1095">Kullu (Headquarters)</option>
      <option value="32.2432,77.1892">Manali</option>
      <option value="31.8790,77.1470">Bhuntar</option>
      <option value="32.1189,77.1730">Naggar</option>
      <option value="31.8414,77.1484">Bajaura</option>
      <option value="32.1096,77.1339">Katrain</option>
      <option value="32.0238,77.1207">Raison</option>
      <option value="32.0127,77.3186">Kasol</option>
      <option value="32.0649,77.2507">Malana</option>
      <option value="32.0625,77.1397">Jagatsukh</option>
    </select>
    <button onclick="fetchWeather()">Get Weather</button>
  </div>

  <div id="weatherDisplay">
    <p>Select a location and click 'Get Weather' to view forecast.</p>
  </div>

  <script>
    async function fetchWeather() {
      try {
        const location = document.getElementById("location").value.split(',');
        const lat = location[0];
        const lon = location[1];

        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weathercode,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=auto`;

        const res = await fetch(url);
        if (!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);

        const data = await res.json();
        const current = data.current;
        const daily = data.daily;

        const weatherCodes = {
          0: "Clear sky", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
          45: "Fog", 48: "Depositing rime fog", 51: "Light drizzle", 53: "Moderate drizzle",
          55: "Dense drizzle", 56: "Light freezing drizzle", 57: "Dense freezing drizzle",
          61: "Slight rain", 63: "Moderate rain", 65: "Heavy rain",
          66: "Light freezing rain", 67: "Heavy freezing rain",
          71: "Slight snow fall", 73: "Moderate snow fall", 75: "Heavy snow fall",
          80: "Slight rain showers", 81: "Moderate rain showers", 82: "Violent rain showers",
          95: "Thunderstorm", 96: "Thunderstorm with hail"
        };

        document.getElementById("weatherDisplay").innerHTML = `
          <h2>Current Weather</h2>
          <p><strong>Temperature:</strong> ${current.temperature_2m}&deg;C</p>
          <p><strong>Wind Speed:</strong> ${current.wind_speed_10m} km/h</p>
          <p><strong>Description:</strong> ${weatherCodes[current.weathercode] || "Unknown"}</p>
          <hr>
          <h3>Forecast</h3>
          <p><strong>Tomorrow:</strong> ${daily.temperature_2m_max[1]}&deg;C / ${daily.temperature_2m_min[1]}&deg;C - ${weatherCodes[daily.weathercode[1]] || "Unknown"}</p>
          <p><strong>Day After:</strong> ${daily.temperature_2m_max[2]}&deg;C / ${daily.temperature_2m_min[2]}&deg;C - ${weatherCodes[daily.weathercode[2]] || "Unknown"}</p>
        `;
      } catch (error) {
        document.getElementById("weatherDisplay").innerHTML = `
          <p style="color: red;">Error fetching weather data: ${error.message}</p>
          <p>Please check your internet connection or try again later.</p>
        `;
        console.error("Weather fetch failed:", error);
      }
    }
  </script>
</body>
</html>
